═══════════════════════════════════════════════════════════════
    AI 자동필기·문제생성·오답기반 개인화 학습
    시스템 기획서
═══════════════════════════════════════════════════════════════

📌 이건 아이디어가 아니라 바로 개발 들어갈 수 있는 설계 문서


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 1. 서비스 한 줄 정의
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  💡 사용자가 올린 필기(사진/텍스트)를 과목·유형별로 분류하고,
     학년·단원·문제유형·오류패턴을 기반으로
     개인 맞춤 문제를 생성·추천하는 AI 학습 시스템

  ⚠️  이건 "필기 정리 앱"이 아니라 AI 튜터 플랫폼임


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 2. 전체 아키텍처 한 방에 보기
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ┌─────────────────────────────────────────────────┐
  │                                                 │
  │  [1] 필기 업로드                                │
  │        ↓                                        │
  │  [2] 과목·콘텐츠 유형 자동 태깅                 │
  │        ↓ (유저 확정)                            │
  │  [3] 개념 구조화 (Concept Cards)                │
  │        ↓                                        │
  │  [4] 문제 생성 (유형·난이도·단원 기반)          │
  │        ↓                                        │
  │  [5] 문제 풀이                                  │
  │        ↓                                        │
  │  [6] 풀이 오류 분석                             │
  │        ↓                                        │
  │  [7] 사용자 오류 프로필 업데이트                │
  │        ↓                                        │
  │  [8] 자주 틀리는 유형/오류 기반 문제 재노출     │
  │                                                 │
  └─────────────────────────────────────────────────┘

  🎯 핵심: 태그 → 구조화 → 오류 피드백 루프


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 3. 입력 데이터 설계 (Note 레벨)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[ 3.1 필기 업로드 타입 ]

  • 이미지 (손필기/교과서/프린트)
  • 텍스트 (타이핑)
  • 혼합 (사진 + 메모)


[ 3.2 자동 + 수동 확정 태그 ]

  ① 과목 태그 (Subject)
  ┌─────────────────────────────────────────┐
  │  math  /  english  /  history  /        │
  │  science  /  korean                     │
  └─────────────────────────────────────────┘


  ② 콘텐츠 유형 태그 (ContentType)

  공통:
  ┌─────────────────────────────────────────┐
  │  concept                                │
  │  note_summary                           │
  │  mistake_note                           │
  │  practice                               │
  └─────────────────────────────────────────┘

  과목별 확장:
  ┌─────────────────────────────────────────┐
  │  영어: passage, vocab, grammar          │
  │  수학: formula, solution, diagram       │
  │  역사: timeline, terms, essay           │
  └─────────────────────────────────────────┘

  ※ AI가 추천 → 유저가 한 번만 확정


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 4. 중간 산출물: Concept Card (핵심 자산)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

⚠️  필기 원본에서 바로 문제 만들지 않음
    반드시 구조화된 개념 카드를 먼저 만듦


[ ConceptCard 구조 ]

  {
    "concept_id": "C123",
    "subject": "math",
    "grade": 3,
    "unit_id": "M3-02",
    "title": "이차방정식의 해",
    "definition": "...",
    "rules_formulas": ["ax²+bx+c=0"],
    "examples": ["..."],
    "common_mistakes": ["부호 실수", "근의 공식 오용"],
    "evidence_spans": ["필기 3번째 줄", "사진 좌측 하단"]
  }

  ⚡ 문제 생성, 오답 분석, 복습 추천 전부 이 카드 기준


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 5. 문제 유형 태그 설계 (문제 자체에 붙는 태그)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[ 5.1 인지 단계 (Cognitive Type) ]

  ┌─────────────────────────────────────────┐
  │  recall       회상                      │
  │  interpret    해석                      │
  │  apply        적용                      │
  │  reason       추론                      │
  │  multi_step   다단계                    │
  │  transfer     전이                      │
  └─────────────────────────────────────────┘


[ 5.2 문제 형식 (Format) ]

  ┌─────────────────────────────────────────┐
  │  mcq             객관식                 │
  │  blank           빈칸                   │
  │  short_answer    짧은 답                │
  │  essay           서술형                 │
  │  true_false      참/거짓                │
  │  passage_based   지문 기반              │
  │  diagram_based   도식 기반              │
  └─────────────────────────────────────────┘

  ※ 문제 하나에 여러 태그 동시 부착 가능
     예: apply + multi_step + mcq


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 6. 풀이 오류 태그 (문제 태그와 완전 분리)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[ 6.1 공통 오류 태그 ]

  ┌─────────────────────────────────────────┐
  │  concept_miss         개념 이해 부족   │
  │  condition_miss       조건 누락        │
  │  calculation_error    계산 실수        │
  │  sign_error           부호 오류        │
  │  logic_gap            논리 비약        │
  │  careless             단순 실수        │
  │  time_pressure        시간 부족        │
  └─────────────────────────────────────────┘


[ 6.2 과목별 확장 ]

  수학:
  ┌─────────────────────────────────────────┐
  │  formula_selection_error  공식 선택 오류│
  │  graph_reading_error      그래프 해석   │
  │                           오류           │
  └─────────────────────────────────────────┘

  영어:
  ┌─────────────────────────────────────────┐
  │  vocab_gap           어휘 부족          │
  │  syntax_misparse     구문 오해석        │
  │  inference_error     추론 실패          │
  └─────────────────────────────────────────┘

  역사:
  ┌─────────────────────────────────────────┐
  │  chronology_confusion  연대 혼동        │
  │  cause_effect_mixup    인과관계 혼동    │
  └─────────────────────────────────────────┘


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 7. 문제 생성 로직
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[ 입력 ]

  • ConceptCard
  • 학년 / 단원
  • 문제 유형 태그
  • 난이도 파라미터
  • 사용자 오류 프로필 (있다면)


[ 출력 예시 ]

  {
    "question": "...",
    "choices": ["A", "B", "C", "D"],
    "answer": "B",
    "solution": "...",
    "question_tags": ["apply", "mcq"],
    "induced_error_tags": ["condition_miss"],
    "evidence_spans": ["필기 근거"]
  }


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 8. 오답 분석 로직
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[ 8.1 객관식 ]

  • 선택한 보기 → 사전 정의된 오류 태그 매핑

  예시:
  ┌─────────────────────────────────────────────────┐
  │  문제: x²-5x+6=0의 해는?                        │
  │                                                 │
  │  ① x=2,3           (정답)                       │
  │  ② x=-2,-3         → sign_error                │
  │  ③ x=1,6           → calculation_error         │
  │  ④ x=-1,-6         → concept_miss              │
  └─────────────────────────────────────────────────┘


[ 8.2 서술형 ]

  • 풀이 단계 분해
  • 오류 지점 추적
  • 오류 태그 1~2개만 선택 (강제)


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 9. 사용자 오류 프로필 (개인화의 핵심)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[ 프로필 구조 ]

  {
    "user_id": "U1",
    "error_profile": {
      "condition_miss": 0.41,
      "concept_miss": 0.27,
      "calculation_error": 0.18,
      "logic_gap": 0.14
    }
  }


[ 업데이트 원칙 ]

  • 최근 데이터 가중치 ↑
  • 오래된 오류는 decay
  • 최근 20문항 기준으로 빈도 계산


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 10. 문제 노출(추천) 알고리즘 개념
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[ 노출 스코어 계산 ]

  exposure_score =
    base_weight
    × error_match_weight      (오류 매칭도)
    × recency_decay           (최근성 감소)
    × mastery_penalty         (숙달도 패널티)


[ 추천 원칙 ]

  ① 자주 틀리는 오류 태그와 매칭된 문제 우선 노출

  ② 연속 정답 시 빈도 감소

  ③ 너무 자주 나오면 잠깐 숨김

  🎯 목표: "틀릴수록 더 보이지만, 스트레스는 안 받게"


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 11. UX 흐름 (V1 기준)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ① 필기 업로드
        ↓
  ② 과목/유형 태그 확인 (AI 추천 → 유저 확정)
        ↓
  ③ 핵심 개념 카드 자동 생성
        ↓
  ④ 문제 생성 (개념별 2문제)
        ↓
  ⑤ 풀이
        ↓
  ⑥ 오답 분석 + 오류 유형 설명
     "이 문제는 '조건 누락' 때문에 틀렸어요"
        ↓
  ⑦ 오답 기반 유사문제 자동 추천
     "비슷한 유형 3문제 더 풀어볼까요?"


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 12. MVP 최소 구성 (현실 버전)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[ 태그 시스템 ]

  ┌─────────────────────────────────────────────────┐
  │  • 과목: 3개 (수학/영어/역사)                    │
  │  • 콘텐츠 유형: 4개                              │
  │  • 문제 유형: 6개                                │
  │  • 오류 태그: 7개                                │
  └─────────────────────────────────────────────────┘


[ 핵심 기능 ]

  ┌─────────────────────────────────────────────────┐
  │  ✓ 필기 → 개념 카드                             │
  │  ✓ 문제 자동 생성                                │
  │  ✓ 객관식 오답 분석                              │
  │  ✓ 오류 기반 문제 재노출                         │
  └─────────────────────────────────────────────────┘

  ⚡ 이 정도만 해도 "와 얘네 다르다" 소리 나옴


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 13. 이 기획의 진짜 강점 (사업적으로)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ✓ AI 개인화가 설명 가능함
    (태그/오류 데이터로 근거 제시)

  ✓ 학부모·교사용 리포트 확장 쉬움
    "OO는 조건 누락을 41% 자주 틀립니다"

  ✓ 과목 추가 = 템플릿 추가
    (스케일 좋음)

  ✓ "AI가 공부 시켜준다"는 서사 완성
    단순 정리 앱이 아닌 튜터 포지셔닝


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 14. 다음 액션 추천 (현실적 순서)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  1️⃣  수학 한 과목만으로 MVP 스펙 확정

  2️⃣  ConceptCard + Question JSON 스키마 고정

  3️⃣  문제 생성 & 오류 분석 프롬프트 세트 작성

  4️⃣  실제 중학생 필기 10개로 테스트


[ 추가 산출물 옵션 ]

  • 📄 전체 기획서 PDF/캔버스용 정리
  • 🧠 프롬프트 세트
  • 🧱 DB 스키마
  • 🔁 상태 머신 다이어그램


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 15. 시스템 설계 핵심 원칙 요약
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ┌─────────────────────────────────────────────────┐
  │                                                 │
  │  [원칙 1] 모든 AI 산출물은 evidence_spans 필수  │
  │           (필기 근거 없으면 생성 금지)           │
  │                                                 │
  │  [원칙 2] 필기 → Concept Card → 문제            │
  │           (구조화 단계 생략 금지)                │
  │                                                 │
  │  [원칙 3] 문제 태그 ≠ 오류 태그                 │
  │           (완전 분리된 시스템)                   │
  │                                                 │
  │  [원칙 4] 개인화는 설명 가능해야 함             │
  │           (블랙박스 추천 금지)                   │
  │                                                 │
  │  [원칙 5] 외부 지식 보강은 V2 이후              │
  │           (MVP는 업로드 기반만)                  │
  │                                                 │
  └─────────────────────────────────────────────────┘


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 16. 기술 스택 추천 (참고용)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[ AI/ML ]
  • GPT-4 (문제 생성, 오답 분석)
  • OCR: Google Vision API / Tesseract
  • 벡터 DB: Pinecone (유사 문제 검색)

[ Backend ]
  • FastAPI (Python)
  • PostgreSQL (메타데이터)
  • Redis (세션/캐시)

[ Frontend ]
  • React Native (크로스 플랫폼)
  • 또는 Flutter


═══════════════════════════════════════════════════════════════
  💬 마무리 코멘트
═══════════════════════════════════════════════════════════════

  지금 흐름이면, 진짜 "될 앱" 만들고 있어.

  이건 필기 정리 앱이 아니라 **AI 튜터 플랫폼**이야.
  꽤 센 기획이고, 차별화 포인트 명확함.

  다음 단계는:
    1) 수학 과목 MVP 스펙 확정
    2) 실제 필기로 프로토타입 테스트
    3) 사용자 피드백 루프 구축


═══════════════════════════════════════════════════════════════
                        문서 끝
═══════════════════════════════════════════════════════════════
