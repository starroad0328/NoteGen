================================================================
NotioClass 개발 일지 - 2026년 1월 10일
================================================================

작업 내용: AI 파이프라인 속도 최적화


----------------------------------------------------------------
1. AI 파이프라인 최적화 (3단계 -> 2단계)
----------------------------------------------------------------

배경:
  - 기존 파이프라인: 3번 API 호출 -> ~110초 소요
    - Step 0: OCR 정제 (GPT-5-mini) ~35초
    - Step 1: 구조 분석 (GPT-5-mini) ~35초
    - Step 2: 콘텐츠 생성 (GPT-5-mini) ~35초
  - 목표: 2번 API 호출 -> ~70초

해결 방안:
  - Step 1 + Step 2를 하나의 API 호출로 통합
  - 구조 분석과 콘텐츠 생성을 한 번에 수행

구현 내용:

[새 메서드: _step1_analyze_and_organize]
  - 하나의 프롬프트로 분석 + 정리 동시 수행
  - JSON 형식으로 subject, note_type, detected_unit, content 반환
  - max_completion_tokens: 8000 (기존 Step1 3000 + Step2 6000 통합)

[organize_note 메서드 수정]
  - 기본 요약(BASIC_SUMMARY), 코넬식(CORNELL): 최적화된 2단계 사용
  - 오답노트(ERROR_NOTE), 단어장(VOCAB): 기존 3단계 유지 (특수 프롬프트 필요)
  - 일반 필기에서 오답노트/단어장 자동 감지시 재처리 로직 추가

[새 메서드: _organize_note_legacy]
  - 기존 3단계 로직을 별도 메서드로 분리
  - 오답노트/단어장 처리용

예상 효과:
  - 기본 요약/코넬식: ~110초 -> ~70초 (약 36% 단축)
  - 오답노트/단어장: 기존과 동일 (~110초)


----------------------------------------------------------------
2. 브랜치 정보
----------------------------------------------------------------

작업 브랜치: feature/pipeline-optimization
커밋: perf: AI 파이프라인 최적화 (3단계 -> 2단계)


----------------------------------------------------------------
3. 다음 작업
----------------------------------------------------------------

  [ ] 실제 테스트로 속도 개선 확인
  [ ] 품질 유지 여부 검증
  [ ] main 브랜치에 병합 (테스트 통과 후)


================================================================
