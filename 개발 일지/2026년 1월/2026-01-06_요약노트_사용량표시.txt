================================================================
NotioClass 개발 일지 - 2026년 1월 6일
================================================================

작업 내용: 요약 노트 생성 기능 + 반응형 UI + 관리자 API


----------------------------------------------------------------
1. 요약 노트 생성 기능 구현
----------------------------------------------------------------

목적:
  - 여러 노트를 선택해서 시험용 요약 노트 생성
  - 플랜별 사용량 제한 적용

구현 내용:

  [백엔드]
  - /api/summary/generate - 요약 생성 API
  - /api/summary/limits - 사용량 제한 조회 API
  - SummaryStyle enum (basic, keyword, table)
  - 플랜별 제한:
    - Free: 월 1회, 최대 3개 노트
    - Basic: 월 5회, 최대 5개 노트
    - Pro: 무제한, 최대 10개 노트
  - AI 모델: PRO는 GPT-5.2, 나머지는 GPT-5-mini

  [프론트엔드]
  - mobile/app/summary.tsx 신규 생성
  - 노트 선택 (체크박스 UI)
  - 스타일 선택 (기본/키워드/표)
  - PRO 전용 스타일 잠금 표시
  - 사용량 정보 표시
  - 보관함에 "요약 생성" 버튼 추가

수정 파일:
  - backend/app/api/summary.py (신규)
  - backend/app/services/ai_service.py (generate_summary 메서드)
  - backend/app/models/user.py (요약 사용량 메서드)
  - backend/app/main.py (라우터 등록, 마이그레이션)
  - mobile/app/summary.tsx (신규)
  - mobile/app/(tabs)/notes.tsx (요약 버튼)
  - mobile/services/api.ts (summaryAPI)


----------------------------------------------------------------
2. 반응형 Safe Area 적용
----------------------------------------------------------------

목적:
  - 네비게이션 바에 UI가 가려지는 문제 해결
  - 다양한 기기에서 정상 표시

구현 내용:
  - useSafeAreaInsets 훅 사용
  - 상단: insets.top + 패딩
  - 하단: Math.max(insets.bottom, 16) + 패딩

적용 화면:
  - mobile/app/summary.tsx (요약 생성 화면)
  - mobile/app/notes/[id].tsx (노트 상세 화면 하단 날짜)


----------------------------------------------------------------
3. 홈 화면 사용량 표시 개선
----------------------------------------------------------------

목적:
  - Pro 사용자도 사용량 표시 (기존에는 Pro 숨김)

변경 내용:
  - Pro: 보라색 배경 + "무제한" 텍스트
  - Free/Basic: 파란색 배경 + "N회 남음"
  - 3회 이하: 주황색 경고 표시

수정 파일:
  - mobile/app/(tabs)/index.tsx


----------------------------------------------------------------
4. 관리자 플랜 변경 API
----------------------------------------------------------------

목적:
  - 사용자 플랜을 수동으로 변경할 수 있는 관리 기능

구현 내용:
  - POST /api/auth/admin/set-plan
  - 파라미터: email, plan, admin_key
  - admin_key로 간단한 인증

수정 파일:
  - backend/app/api/auth.py


----------------------------------------------------------------
5. 개념카드 전체보기 기능
----------------------------------------------------------------

목적:
  - PRO 탭 개념카드 UI 개선

변경 내용:
  - 최신 3개만 미리보기
  - "전체 보기" 버튼으로 전체 표시

수정 파일:
  - mobile/app/(tabs)/practice.tsx


----------------------------------------------------------------
6. 보관함 필터 개선
----------------------------------------------------------------

변경 내용:
  - 과목 필터 확대 (사회, 과학, 역사 추가)
  - 제목 검색 기능 추가 (디바운스 적용)
  - 필터 변경 시 로딩 화면 대신 리스트만 갱신

수정 파일:
  - mobile/app/(tabs)/notes.tsx


----------------------------------------------------------------
커밋 내역
----------------------------------------------------------------

1a81c2f feat: 요약 노트 생성 기능 추가
b3c1c22 fix: 요약 화면 반응형 safe area 적용
07ffe50 fix: 노트 상세 화면 하단 safe area 적용
15f8eb9 fix: 홈 화면 사용량 프로도 표시
6afac31 feat: 관리자 플랜 변경 API 추가


================================================================
